# Decap CMS Configuration for Young Chai Blog
# Deployed on Cloudflare Pages with OAuth

backend:
  name: github
  repo: josephdc18/youngchai-blog
  branch: main
  base_url: https://chailikethetea.com
  auth_endpoint: /api/auth

# Editorial Workflow - enables drafts and review stages
# Posts are saved as branches until published
publish_mode: editorial_workflow

# Enable local backend for development (run: npx decap-server)
local_backend: true

# Logo for CMS
logo_url: /assets/logo-light.png

# i18n configuration - multiple folders structure
i18n:
  structure: multiple_folders
  locales: [en, ko]
  default_locale: en

# Media settings
media_folder: 'src/assets/images/blog'
public_folder: '/assets/images/blog'

# Slug settings
slug:
  encoding: 'unicode'
  clean_accents: true
  sanitize_replacement: '-'

collections:
  # Blog Posts Collection (with i18n)
  - name: 'blog'
    label: 'Blog Posts'
    label_singular: 'Blog Post'
    folder: 'src/content/blog'
    create: true
    slug: '{{slug}}'
    i18n: true
    sortable_fields: ['date', 'title', 'category']
    view_filters:
      - label: Living
        field: category
        pattern: 'LIVING'
      - label: Style
        field: category
        pattern: 'STYLE'
      - label: Travel
        field: category
        pattern: 'TRAVEL'
      - label: Work
        field: category
        pattern: 'WORK'
      - label: Food
        field: category
        pattern: 'FOOD'
    view_groups:
      - label: Category
        field: category
    fields:
      - label: 'Title'
        name: 'title'
        widget: 'string'
        i18n: true
      - label: 'Slug (URL path)'
        name: 'slug'
        widget: 'string'
        i18n: duplicate
        pattern: ['^[a-z0-9]+(?:-[a-z0-9]+)*$', 'Use lowercase letters, numbers, and hyphens only']
      - label: 'Description'
        name: 'description'
        widget: 'text'
        i18n: true
      - label: 'Category'
        name: 'category'
        widget: 'select'
        i18n: duplicate
        hint: 'Main categories are shown first, then subcategories indented'
        options:
          # Main Categories
          - { label: 'üìÅ Living', value: 'LIVING' }
          - { label: '   ‚Ü≥ Interiors', value: 'INTERIORS' }
          - { label: '   ‚Ü≥ Wellness', value: 'WELLNESS' }
          - { label: '   ‚Ü≥ Tech', value: 'TECH' }
          - { label: 'üìÅ Style', value: 'STYLE' }
          - { label: '   ‚Ü≥ Photography', value: 'PHOTOGRAPHY' }
          - { label: 'üìÅ Travel', value: 'TRAVEL' }
          - { label: 'üìÅ Work', value: 'WORK' }
          - { label: '   ‚Ü≥ Essay', value: 'ESSAY' }
          - { label: 'üìÅ Food', value: 'FOOD' }
      - label: 'Author'
        name: 'author'
        widget: 'string'
        default: 'Young Chai'
        i18n: duplicate
      - label: 'Date'
        name: 'date'
        widget: 'datetime'
        i18n: duplicate
      - label: 'Tags'
        name: 'tags'
        widget: 'select'
        multiple: true
        default: ['post']
        i18n: true
        hint: 'Control where posts appear on the site'
        options:
          - { label: 'Post (default)', value: 'post' }
          - { label: 'üìå Pinned (Homepage Hero)', value: 'pinned' }
          - { label: '‚≠ê Featured (Sidebar)', value: 'featured' }
          - { label: 'üî• Popular (Homepage Sidebar)', value: 'popular' }
          - { label: 'üí¨ Most Commented (Homepage Section)', value: 'commented' }
      - label: 'Featured Image'
        name: 'image'
        widget: 'image'
        i18n: duplicate
        required: false
      - label: 'Image Alt Text'
        name: 'imageAlt'
        widget: 'string'
        i18n: true
        required: false
      - label: 'Body'
        name: 'body'
        widget: 'markdown'
        i18n: true

  # Categories Collection - for managing categories/subcategories
  - name: 'categories'
    label: 'Categories'
    files:
      - name: 'categories'
        label: 'Manage Categories'
        file: 'src/_data/categories.json'
        fields:
          - label: 'Categories'
            name: 'categories'
            widget: 'list'
            label_singular: 'Category'
            summary: '{{fields.name}} ({{fields.slug}})'
            fields:
              - { label: 'Name', name: 'name', widget: 'string' }
              - label: 'Slug'
                name: 'slug'
                widget: 'string'
                hint: 'URL-friendly identifier (uppercase, e.g., LIVING)'
              - label: 'Subcategories'
                name: 'subcategories'
                widget: 'list'
                label_singular: 'Subcategory'
                required: false
                summary: '{{fields.name}}'
                fields:
                  - { label: 'Name', name: 'name', widget: 'string' }
                  - label: 'Slug'
                    name: 'slug'
                    widget: 'string'
                    hint: 'URL-friendly identifier (uppercase, e.g., INTERIORS)'

  # Site Settings (single files, no i18n for settings)
  - name: 'settings'
    label: 'Site Settings'
    files:
      - name: 'client'
        label: 'Client Info'
        file: 'src/_data/client.json'
        fields:
          - { label: 'Name', name: 'name', widget: 'string' }
          - { label: 'Email', name: 'email', widget: 'string' }
          - { label: 'Phone', name: 'phone', widget: 'string', required: false }
          - { label: 'Domain', name: 'domain', widget: 'string' }
          - { label: 'Tagline', name: 'tagline', widget: 'string' }
          - { label: 'Profile Image', name: 'profileImage', widget: 'image', required: false }
          - label: 'Address'
            name: 'address'
            widget: 'object'
            fields:
              - { label: 'City', name: 'city', widget: 'string' }
              - { label: 'County', name: 'county', widget: 'string' }
          - label: 'Social Links'
            name: 'social'
            widget: 'object'
            fields:
              - { label: 'Instagram', name: 'instagram', widget: 'string', required: false }
              - { label: 'Twitter', name: 'twitter', widget: 'string', required: false }
              - { label: 'Pinterest', name: 'pinterest', widget: 'string', required: false }

      - name: 'topics'
        label: 'Homepage Topics (Browse by Topic)'
        file: 'src/_data/topics.json'
        fields:
          - label: 'Topics'
            name: 'topics'
            widget: 'list'
            label_singular: 'Topic'
            summary: '{{fields.name}}'
            hint: 'These appear in the "Browse by Topic" section on the homepage'
            fields:
              - { label: 'Name', name: 'name', widget: 'string' }
              - { label: 'Slug', name: 'slug', widget: 'string', hint: 'Must match a category slug (lowercase)' }
              - { label: 'Image', name: 'image', widget: 'image' }

      - name: 'editorsPicks'
        label: "Editor's Picks"
        file: 'src/_data/editorsPicks.json'
        fields:
          - label: 'Picks'
            name: 'picks'
            widget: 'list'
            label_singular: 'Pick'
            summary: '{{fields.title}}'
            fields:
              - { label: 'Title', name: 'title', widget: 'string' }
              - { label: 'Link', name: 'link', widget: 'string', hint: 'URL to the blog post' }
              - { label: 'Image', name: 'image', widget: 'image' }
