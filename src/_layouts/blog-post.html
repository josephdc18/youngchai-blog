---
layout: 'base.html'
preloadCSS: '/css/blog.css'
eleventyComputed:
    description: "{{ description | default: blogDescription }}"
    metaTitle: "{{ title | default: blogTitle }}"
    tagTitle: "{{ title | default: blogTitle }}"
    preloadImg: "{{ image }}"
    permalink: "{% if locale == 'ko' %}/ko{% endif %}/blog/{{ slug | default: pageName }}/index.html"
---
{% set currentLocale = locale | default(page.url | getLocale) %}
{% set postTitle = title | default(blogTitle) %}
{% set postDescription = description | default(blogDescription) %}
{% set featuredCollection = 'featured_' + currentLocale %}

<!-- ============================================ -->
<!--                    LANDING                   -->
<!-- ============================================ -->

<section id="int-hero" style="background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('{{ image }}') center/cover no-repeat;">
</section>

<!-- ============================================ -->
<!--              Main Blog Content               -->
<!-- ============================================ -->

<div class="blog-container main-content-wrapper">
    <!--Main content -->
    <div class="main-content">
        <!-- ============================================ -->
        <!--                  Blog Article                -->
        <!-- ============================================ -->

        <article class="blog-article">
            <!--Main Article Image-->
            <picture class="blog-mainImage">
                <img src="{{ image }}" alt="{{ imageAlt }}" width="795" height="400" decoding="async"/>
            </picture>

            <!--Article Info-->
            <div class="article-group">
                <h1 class="blog-h1">{{ postTitle }}</h1>
                <div class="blog-authorGroup">
                    <!--Author Image-->
                    <picture class="blog-author-img">
                        <img
                            src="/assets/svgs/profile.svg"
                            alt="{{ author }}"
                            width="32"
                            height="32"
                            decoding="async"
                        />
                    </picture>
                    <span class="blog-author">{{ author }}</span>
                    <span aria-hidden="true" class="blog-dot"></span>
                    <!--Blog Date-->
                    <span class="blog-date">{{ date | postDateLocale(currentLocale) }}</span>
                </div>
            </div>
            <section id="blog-content">
                {{ content | safe }}
            </section>
        </article>

        <!-- ============================================ -->
        <!--          Comments Section (Giscus)           -->
        <!-- ============================================ -->
        <section class="comments-section" id="comments-section">
            <div class="comments-header">
                <h2 class="comments-title">
                    <i data-lucide="message-circle" width="24" height="24"></i>
                    <span>{{ 'Comments' if currentLocale == 'en' else '댓글' }}</span>
                </h2>
            </div>

            <!-- Giscus Comments -->
            <div class="giscus-container">
                <script src="https://giscus.app/client.js"
                        data-repo="josephdc18/youngchai-blog"
                        data-repo-id="R_kgDOQnvwIQ"
                        data-category="Blog Comments"
                        data-category-id="DIC_kwDOQnvwIc4C0EMg"
                        data-mapping="pathname"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="{{ currentLocale }}"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                </script>
            </div>
        </section>
    </div>
    <!-- End .main-content -->

    <!-- ============================================ -->
    <!--                   Sidebar                    -->
    <!-- ============================================ -->

    <div class="blog-sidebar">
        <div class="sticky-wrapper">
            <div class="widget-box">
                <div class="corner-tr"></div>
                <div class="corner-bl"></div>

                <div class="widget-header">
                    <i data-lucide="star" class="text-accent" width="20" height="20"></i>
                    <h3 class="italic" style="font-size: 1.25rem;">{{ 'blog.featuredPosts' | t(currentLocale) }}</h3>
                </div>

                <ul class="widget-list">
                    {% set featuredPosts = collections[featuredCollection] | default(collections.featured) | default([]) %}
                    {% if featuredPosts | length > 0 %}
                        {%- for post in featuredPosts | head(5) -%}
                            {%- set index = loop.index -%}
                            <li class="group">
                                <div class="widget-list-meta">
                                    <span class="widget-num">{{ index | padStart(2, '0') }}</span>
                                    <span class="widget-tag">{{ post.data.category | upper | default('BLOG') }}</span>
                                </div>
                                <a href="{{ post.url }}">
                                    <h4 class="widget-title">{{ post.data.title | default(post.data.blogTitle) }}</h4>
                                </a>
                            </li>
                        {%- endfor -%}
                    {% else %}
                        <li>
                            <p class="post-excerpt" style="font-size: 0.9rem;">
                                {{ 'Featured posts will appear here.' if currentLocale == 'en' else '추천 글이 여기에 표시됩니다.' }}
                            </p>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
/* Giscus container styling */
.giscus-container {
    margin-top: 2rem;
    padding: 1rem 0;
}

/* Style the Giscus iframe to match the site */
.giscus-frame {
    width: 100%;
}

/* Comments section header */
.comments-section {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid var(--color-border, #e5e7eb);
}

.comments-header {
    margin-bottom: 1.5rem;
}

.comments-title {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-family: var(--font-serif, 'Playfair Display', serif);
    font-size: 1.5rem;
    font-weight: 400;
    color: var(--bodyHeader, #1a1a1a);
}
</style>
